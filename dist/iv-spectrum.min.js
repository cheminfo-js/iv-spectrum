!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).IVSpectrum={})}(this,(function(e){"use strict";function t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{rescale:n=!1,uniqueX:r=!1,xColumn:i=0,yColumn:a=1,keepInfo:l=!1,maxNumberColumns:o=Number.MAX_SAFE_INTEGER,minNumberColumns:s=2}=t;o=Math.max(o,i+1,a+1),s=Math.max(i+1,a+1,s);let f=e.split(/[\r\n]+/),c=Number.MIN_VALUE,p={x:[],y:[]},u=[];for(let e=0;e<f.length;e++){let t=f[e].trim();if(t.match(/[0-9]+/)&&t.match(/^[0-9eE,;. \t+-]+$/)){let e=t.split(/,[; \t]+|[; \t]+/);if(1===e.length&&(e=t.split(/[,; \t]+/)),e&&e.length>=s&&e.length<=o){let t=parseFloat(e[i].replace(",",".")),n=parseFloat(e[a].replace(",","."));n>c&&(c=n),p.x.push(t),p.y.push(n)}}else t&&u.push({position:p.x.length,value:t})}if(r&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{x:t,y:n}=e;if(t.length<2)return;if(t.length!==n.length)throw new Error("The X and Y arrays mush have the same length");let r=t[0],i=0;for(let e=1;e<t.length;e++)r!==t[e]&&(i++,r=t[e],t[i]=t[e],e!==i&&(n[i]=0)),e!==i&&(n[i]+=n[e]);t.length=i+1,n.length=i+1}(p),n)for(let e=0;e<p.y.length;e++)p.y[e]/=c;return l?{info:u,data:p}:p}function n(e){return{x:e[0],y:e[1]}}function r(e){var t=[],n=[];for(const r of e)t.push(r[0]),n.push(r[1]);return{x:t,y:n}}function i(e){var t=[],n=[];for(const r of e)t.push(r.x),n.push(r.y);return{x:t,y:n}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{inputFormat:a,outputFormat:l="xxyyObject"}=t;if(a===l)return e;let o;switch(a){case"xxyyArray":o=n(e);break;case"xyxyArray":o=r(e);break;case"xxyyObject":o=e;break;case"xyxyObject":o=i(e);break;default:o=function(e){if(Array.isArray(e))return 0===e.length?{x:[],y:[]}:Array.isArray(e[0])?2===e.length?n(e):r(e):i(e);if(Array.isArray(e.x)&&Array.isArray(e.x))return e;throw new TypeError("unknown data format")}(e)}switch(l){case"xxyyArray":return function(e){let{x:t,y:n}=e;return[t,n]}(o);case"xyxyArray":return function(e){let{x:t,y:n}=e;for(var r=[],i=0;i<t.length;i++)r.push([t[i],n[i]]);return r}(o);case"xxyyObject":return o;case"xyxyObject":return function(e){let{x:t,y:n}=e;for(var r=[],i=0;i<t.length;i++)r.push({x:t[i],y:n[i]});return r}(o);default:throw new TypeError("unknown output format ".concat(l))}}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{title:n="",owner:r="",origin:i="",type:a="",xUnit:l="",yUnit:o="",info:s={}}=t;let f=Number.MAX_VALUE,c=Number.MIN_VALUE,p=Number.MAX_VALUE,u=Number.MIN_VALUE,h=[];for(let t=0;t<e.x.length;t++){let n=e.x[t],r=e.y[t];f>n&&(f=n),c<n&&(c=n),p>r&&(p=r),u<r&&(u=r),h.push("".concat(n," ").concat(r))}let m="##TITLE=".concat(n,"\n##JCAMP-DX=4.24\n##DATA TYPE=").concat(a,"\n##ORIGIN=").concat(i,"\n##OWNER=").concat(r,"\n##XUNITS=").concat(l,"\n##YUNITS=").concat(o,"\n##FIRSTX=").concat(f,"\n##LASTX=").concat(c,"\n##FIRSTY=").concat(p,"\n##LASTY=").concat(u,"\n");for(const e of Object.keys(s))m+="##$".concat(e,"=").concat(s[e],"\n");return"".concat(m,"##NPOINTS=").concat(h.length,"\n##PEAK TABLE=(XY..XY)\n").concat(h.join("\n"),"\n##END")}var o=Object.freeze({__proto__:null,fromText:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{meta:r={},parserOptions:i={}}=n;i.keepInfo=!0;let a=t(e,i);return r.info||(r.info={}),r.info.header=a.info.map(e=>e.value).join("\n"),l(a.data,r)},fromJSON:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(a(e,{outputFormat:"xxyyObject"}),t)}});function s(){const e=/[, \t]+/,t=["TIC",".RIC","SCANNUMBER"];function n(e){let t=[];for(let n=0;n<e.length;n++)t.push(parseFloat(e[n]));return t}class r{}const i={keepRecordsRegExp:/^$/,canonicDataLabels:!0,dynamicTyping:!1,xy:!1,withoutXY:!1,chromatogram:!1,keepSpectra:!1,noContour:!1,nbContourLevels:7,noiseMultiplier:5,profiling:!1};function a(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"")}function l(e){return-1!==t.indexOf(e)}function o(e,t){if(t.xFactor||(t.xFactor=1),t.yFactor||(t.yFactor=1),t.observeFrequency&&t.xUnit&&"HZ"===t.xUnit.toUpperCase()&&(t.xUnit="PPM",t.xFactor=t.xFactor/t.observeFrequency,t.firstX=t.firstX/t.observeFrequency,t.lastX=t.lastX/t.observeFrequency,t.deltaX=t.deltaX/t.observeFrequency),t.shiftOffsetVal){let e=t.firstX-t.shiftOffsetVal;t.firstX=t.firstX-e,t.lastX=t.lastX-e}}function s(e){let t=(e=e.sort(f)).length;return e[Math.floor(t/2)]}function f(e,t){return e-t}function c(e,t){let n=e.yFactor,r=e.deltaX;e.isXYdata=!0;let i=[];e.data=[i];let a,l=e.firstX,o=e.firstY,s=!1,f=0;for(;f<t.length;f++)if(a=t.charCodeAt(f),13===a||10===a)s=!0;else if(s)break;let c=!0,p=!1,u=!1,h=0,m=!1,g=!1,y=0,d=0,x=!1,A=!1,b=!1,X=0;for(;f<=t.length;f++)if(a=f===t.length?13:t.charCodeAt(f),g)13!==a&&10!==a||(c=!0,g=!1);else if(a<=57&&a>=48)A=!0,X>0?y+=(a-48)/Math.pow(10,X++):(y*=10,y+=a-48);else if(44===a||46===a)A=!0,X++;else{if(A){if(c)c=!1,u&&(b=!0);else if(b)b=!1;else{p?(h=x?0-y:y,u=!0,p=!1):m||(d=x?0-y:y);let e=m?y-1:1;for(let t=0;t<e;t++)u?o+=h:o=d,i.push(l),i.push(o*n),l+=r}x=!1,y=0,X=0,A=!1,m=!1}if(a<74&&a>63)A=!0,u=!1,y=a-64;else if(a>96&&a<106)A=!0,u=!1,y=a-96,x=!0;else if(115===a)A=!0,m=!0,y=9;else if(a>82&&a<91)A=!0,m=!0,y=a-82;else if(a>73&&a<83)A=!0,p=!0,y=a-73;else if(a>105&&a<115)A=!0,p=!0,y=a-105,x=!0;else if(36===a&&36===t.charCodeAt(f+1))A=!0,g=!0;else if(37===a)A=!0,p=!0,y=0,x=!1;else if(45===a){let e=t.charCodeAt(f+1);(e>=48&&e<=57||44===e||46===e)&&(A=!0,c||(u=!1),x=!0)}else 13!==a&&10!==a||(c=!0,g=!1)}}function p(e,t){let n,r=/(\(+|\)+|<+|>+|\s+)/g;e.isXYAdata=!0;let i=[];e.data=[i];let a=t.split(/,? *,?[;\r\n]+ */);for(let e=1;e<a.length;e++)n=a[e].trim().replace(r,"").split(","),i.push(parseFloat(n[0])),i.push(parseFloat(n[1]))}function u(e,t,n){let r,i=/\$\$.*/,a=/[,\t ]+/;e.isPeaktable=!0;let l=[];e.data=[l];let o=t.split(/,? *,?[;\r\n]+ */);for(let t=1;t<o.length;t++)if(r=o[t].trim().replace(i,"").split(a),r.length%2==0)for(let t=0;t<r.length;t+=2)l.push(parseFloat(r[t])*e.xFactor),l.push(parseFloat(r[t+1])*e.yFactor);else n.logs.push("Format error: ".concat(r))}return function(f,h){let m,g,y,d,x,A,b=!(h=Object.assign({},i,h)).withoutXY,X=Date.now(),F={},T={};T.profiling=!!h.profiling&&[],T.logs=[];let E=[];T.spectra=E,T.info={};let N=new r;if("string"!=typeof f)throw new TypeError("the JCAMP should be a string");T.profiling&&T.profiling.push({action:"Before split to LDRS",time:Date.now()-X}),y=f.split(/[\r\n]+##/),T.profiling&&T.profiling.push({action:"Split to LDRS",time:Date.now()-X}),y[0]&&(y[0]=y[0].replace(/^[\r\n ]*##/,""));for(let t=0;t<y.length;t++){let i;m=y[t],d=m.indexOf("="),d>0?(i=m.substring(0,d),g=m.substring(d+1).trim()):(i=m,g="");let s=i.replace(/[_ -]/g,"").toUpperCase();if("DATATABLE"===s&&(x=g.indexOf("\n"),-1===x&&(x=g.indexOf("\r")),x>0)){let e=-1,t=-1;if(A=g.substring(0,x).split(/[ ,;\t]+/),A[0].indexOf("++")>0){let n=A[0].replace(/.*\(([a-zA-Z0-9]+)\+\+.*/,"$1"),r=A[0].replace(/.*\.\.([a-zA-Z0-9]+).*/,"$1");e=F.symbol.indexOf(n),t=F.symbol.indexOf(r)}-1===e&&(e=0),-1===t&&(t=0),F.first&&(F.first.length>e&&(N.firstX=F.first[e]),F.first.length>t&&(N.firstY=F.first[t])),F.last&&(F.last.length>e&&(N.lastX=F.last[e]),F.last.length>t&&(N.lastY=F.last[t])),F.vardim&&F.vardim.length>e&&(N.nbPoints=F.vardim[e]),F.factor&&(F.factor.length>e&&(N.xFactor=F.factor[e]),F.factor.length>t&&(N.yFactor=F.factor[t])),F.units&&(F.units.length>e&&(N.xUnit=F.units[e]),F.units.length>t&&(N.yUnit=F.units[t])),N.datatable=A[0],A[1]&&A[1].indexOf("PEAKS")>-1?s="PEAKTABLE":A[1]&&(A[1].indexOf("XYDATA")||A[0].indexOf("++")>0)&&(s="XYDATA",N.deltaX=(N.lastX-N.firstX)/(N.nbPoints-1))}if("XYDATA"!==s)if("PEAKTABLE"!==s)if("PEAKASSIGNMENTS"!==s){if("TITLE"===s)N.title=g;else if("DATATYPE"===s)N.dataType=g,g.indexOf("nD")>-1&&(T.twoD=!0);else if("NTUPLES"===s)g.indexOf("nD")>-1&&(T.twoD=!0);else if("XUNITS"===s)N.xUnit=g;else if("YUNITS"===s)N.yUnit=g;else if("FIRSTX"===s)N.firstX=parseFloat(g);else if("LASTX"===s)N.lastX=parseFloat(g);else if("FIRSTY"===s)N.firstY=parseFloat(g);else if("LASTY"===s)N.lastY=parseFloat(g);else if("NPOINTS"===s)N.nbPoints=parseFloat(g);else if("XFACTOR"===s)N.xFactor=parseFloat(g);else if("YFACTOR"===s)N.yFactor=parseFloat(g);else if("MAXX"===s)N.maxX=parseFloat(g);else if("MINX"===s)N.minX=parseFloat(g);else if("MAXY"===s)N.maxY=parseFloat(g);else if("MINY"===s)N.minY=parseFloat(g);else if("DELTAX"===s)N.deltaX=parseFloat(g);else if(".OBSERVEFREQUENCY"===s||"$SFO1"===s)N.observeFrequency||(N.observeFrequency=parseFloat(g));else if(".OBSERVENUCLEUS"===s)N.xType||(T.xType=g.replace(/[^a-zA-Z0-9]/g,""));else if("$SFO2"===s)T.indirectFrequency||(T.indirectFrequency=parseFloat(g));else if("$OFFSET"===s)T.shiftOffsetNum=0,N.shiftOffsetVal||(N.shiftOffsetVal=parseFloat(g));else if("$REFERENCEPOINT"===s);else if("VARNAME"===s)F.varname=g.split(e);else if("SYMBOL"===s)F.symbol=g.split(e);else if("VARTYPE"===s)F.vartype=g.split(e);else if("VARFORM"===s)F.varform=g.split(e);else if("VARDIM"===s)F.vardim=n(g.split(e));else if("UNITS"===s)F.units=g.split(e);else if("FACTOR"===s)F.factor=n(g.split(e));else if("FIRST"===s)F.first=n(g.split(e));else if("LAST"===s)F.last=n(g.split(e));else if("MIN"===s)F.min=n(g.split(e));else if("MAX"===s)F.max=n(g.split(e));else if(".NUCLEUS"===s)T.twoD&&(T.yType=g.split(e)[0]);else if("PAGE"===s){N.page=g.trim(),N.pageValue=parseFloat(g.replace(/^.*=/,"")),N.pageSymbol=N.page.replace(/[=].*/,"");let e=F.symbol.indexOf(N.pageSymbol),t="";F.units&&F.units[e]&&(t=F.units[e]),T.indirectFrequency&&"PPM"!==t&&(N.pageValue/=T.indirectFrequency)}else"RETENTIONTIME"===s?N.pageValue=parseFloat(g):l(s)?N[a(s)]=g:"SAMPLEDESCRIPTION"===s&&(N.sampleDescription=g);if(s.match(h.keepRecordsRegExp)){let e=h.canonicDataLabels?s:i,t=g.trim();h.dynamicTyping&&!isNaN(t)&&(t=Number(t)),T.info[e]?(Array.isArray(T.info[e])||(T.info[e]=[T.info[e]]),T.info[e].push(t)):T.info[e]=t}}else b&&(g.match(/.*(XYA).*/)&&p(N,g),E.push(N),N=new r);else b&&(o(T,N),u(N,g,T),E.push(N),N=new r);else b&&(o(T,N),g.match(/.*\+\+.*/)?(N.deltaX||(N.deltaX=(N.lastX-N.firstX)/(N.nbPoints-1)),c(N,g)):u(N,g,T),E.push(N),N=new r)}if(T.profiling&&T.profiling.push({action:"Finished parsing",time:Date.now()-X}),Object.keys(F).length>0){let e=[],t=Object.keys(F);for(let n=0;n<t.length;n++){let r=t[n],i=F[r];for(let t=0;t<i.length;t++)e[t]||(e[t]={}),e[t][r]=i[t]}T.ntuples=e}if(T.twoD&&b&&(!function(e,t){let n=function(e){let t=e[0].data[0][0],n=t,r=e.length,i=e[0].data[0].length/2,a=new Array(r);for(let l=0;l<r;l++){a[l]=new Array(i);let r=e[l].data[0];for(let e=0;e<i;e++){let i=r[2*e+1];a[l][e]=i,i<t&&(t=i),i>n&&(n=i)}}const l=e[0].data[0][0],o=e[0].data[0][e[0].data[0].length-2],f=e[0].pageValue,c=e[r-1].pageValue;if(l>o)for(let e of a)e.reverse();f>c&&a.reverse();return{z:a,minX:Math.min(l,o),maxX:Math.max(l,o),minY:Math.min(f,c),maxY:Math.max(f,c),minZ:t,maxZ:n,noise:s(a[0].map(Math.abs))}}(e.spectra);t.noContour||(e.contourLines=function(e,t){let n,r,i,a,l,o,s,f,c,p,u,h,m,g=e.noise,y=e.z,d=y.length,x=y[0].length,A=e.minX,b=(e.maxX-A)/(x-1),X=e.minY,F=(e.maxY-X)/(d-1),T=e.minZ,E=e.maxZ,N=2*t.nbContourLevels,O=new Array(N);for(let e=0;e<N;e++){let N={};O[e]=N;let v=e%2,S=(E-t.noiseMultiplier*g)*Math.exp((e>>1)-t.nbContourLevels);m=0===v?S+t.noiseMultiplier*g:0-S-t.noiseMultiplier*g;let w=[];if(N.zValue=m,N.lines=w,!(m<=T||m>=E))for(let e=0;e<d-1;e++){let t=y[e],g=y[e+1];for(let y=0;y<x-1;y++)n=t[y],r=t[y+1],i=g[y],a=g[y+1],l=n>m,o=r>m,s=i>m,f=a>m,l!==o&&l!==s&&(c=y+(m-n)/(r-n),p=e,u=y,h=e+(m-n)/(i-n),w.push(c*b+A),w.push(p*F+X),w.push(u*b+A),w.push(h*F+X)),f!==o&&f!==s&&(c=y+1,p=e+1-(m-a)/(r-a),u=y+1-(m-a)/(i-a),h=e+1,w.push(c*b+A),w.push(p*F+X),w.push(u*b+A),w.push(h*F+X)),o!==s&&(c=(y+1-(m-r)/(i-r))*b+A,p=(e+(m-r)/(i-r))*F+X,o!==l&&(u=y+1-(m-r)/(n-r),h=e,w.push(c),w.push(p),w.push(u*b+A),w.push(h*F+X)),s!==l&&(u=y,h=e+1-(m-i)/(n-i),w.push(c),w.push(p),w.push(u*b+A),w.push(h*F+X)),o!==f&&(u=y+1,h=e+(m-r)/(a-r),w.push(c),w.push(p),w.push(u*b+A),w.push(h*F+X)),s!==f&&(u=y+(m-i)/(a-i),h=e+1,w.push(c),w.push(p),w.push(u*b+A),w.push(h*F+X)))}}return{minX:e.minX,maxX:e.maxX,minY:e.minY,maxY:e.maxY,segments:O}}(n,t),delete n.z);e.minMax=n}(T,h),T.profiling&&T.profiling.push({action:"Finished countour plot calculation",time:Date.now()-X}),h.keepSpectra||delete T.spectra),h.chromatogram&&(h.xy=!0),h.xy&&b&&E.length>0)for(let e=0;e<E.length;e++)if(N=E[e],N.data.length>0)for(let e=0;e<N.data.length;e++){let t=N.data[e],n={x:new Array(t.length/2),y:new Array(t.length/2)};for(let e=0;e<t.length;e+=2)n.x[e/2]=t[e],n.y[e/2]=t[e+1];N.data[e]=n}return h.chromatogram&&(T.spectra.length>1?function(e){let n=e.spectra,r=n.length,i={times:new Array(r),series:{ms:{dimension:2,data:new Array(r)}}},l=[];for(let e=0;e<t.length;e++){let o=a(t[e]);n[0][o]&&(l.push(o),i.series[o]={dimension:1,data:new Array(r)})}for(let e=0;e<r;e++){let t=n[e];i.times[e]=t.pageValue;for(let n=0;n<l.length;n++)i.series[l[n]].data[e]=parseFloat(t[l[n]]);t.data&&(i.series.ms.data[e]=[t.data[0].x,t.data[0].y])}e.chromatogram=i}(T):function(e){let t=e.spectra[0].data[0];e.chromatogram={times:t.x.slice(),series:{intensity:{dimension:1,data:t.y.slice()}}}}(T),T.profiling&&T.profiling.push({action:"Finished chromatogram calculation",time:Date.now()-X})),T.profiling&&T.profiling.push({action:"Total time",time:Date.now()-X}),T}}let f=s();let c,p={};var u,h,m={convert:function(e,t,n){return"boolean"==typeof t&&(n=t,t={}),n?function(e,t){c||function(){let e=URL.createObjectURL(new Blob(["var getConverter =".concat(s.toString(),";var convert = getConverter(); onmessage = function (event) { var data = JSON.parse(event.data); postMessage(JSON.stringify({stamp: data.stamp, output: convert(data.input, data.options)})); };")],{type:"application/javascript"}));c=new Worker(e),URL.revokeObjectURL(e),c.addEventListener("message",(function(e){let t=JSON.parse(e.data),n=t.stamp;p[n]&&p[n](t.output)}))}();return new Promise((function(n){let r="".concat(Date.now()).concat(Math.random());p[r]=n,c.postMessage(JSON.stringify({stamp:r,input:e,options:t}))}))}(e,t):f(e,t)},createTree:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{flatten:n=!1}=t;if("string"!=typeof e)throw new TypeError("the JCAMP should be a string");let r,i=e.split(/[\r\n]+/),a=[],l=[],o=[],s=0,f=e.includes("## ");for(let e=0;e<i.length;e++){let t=i[e],n=f?t.replace(/ /g,""):t;if("##NTUPLES"===n.substring(0,9)&&s++,"##TITLE"===n.substring(0,7)){let o=[n.substring(8).trim()];for(let t=e+1;t<i.length&&!i[t].startsWith("##");t++)o.push(i[t].trim());l.push({title:o.join("\n"),jcamp:"".concat(t,"\n"),children:[]}),r=l[l.length-1],a.push(r)}else if("##END"===n.substring(0,5)&&0===s){r.jcamp+="".concat(t,"\n");let e=l.pop();0!==l.length?(r=l[l.length-1],r.children.push(e)):(r=void 0,o.push(e))}else if(r&&r.jcamp){r.jcamp+="".concat(t,"\n");let e=n.match(/^##(.*?)=(.+)/);if(e){"DATATYPE"===e[1].replace(/[ _-]/g,"").toUpperCase()&&(r.dataType=e[2].trim())}}"##END"===n.substring(0,5)&&s>0&&s--}return n?(a.forEach(e=>{e.children=void 0}),a):o}},g=(u=o)&&u.default||u,y=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{meta:i={}}=r;e&&e.length>1&&e[0]>e[1]?(this.x=e.reverse(),this.y=t.reverse()):(this.x=e||[],this.y=t||[]),this.id=n,this.meta=i}getXLabel(){return"Voltage [V]"}getYLabel(){return"Intensity [A]"}}function r(e,t){let n={},r=(e=e.replace(/ ([xy]) /g,",$1,")).split("; ");for(let e of r){let r=i(e,t);n[r.axis]=r}return n}function i(e,t){let n=e.split(","),r={};if(r.axis=n[1],r.kind=n[0],r.unit=n[4].replace(/"/g,""),"SetScale/P"===r.kind){let e=Number(n[2]),i=Number(n[3]),a=[];for(let n=0;n<t;n++)a.push(e),e+=i,r.values=a}return r}function a(e){return{CE:"counterElectrodeType",Calibrationfile:"calibrationFile",Username:"username",WE:"workingElectrodeGlass",cellname:"cellname",electrolyte:"electrolyteZ960",layer:"semicondutorLayer",specification:"remarks",temp:"workingTemperature",type:"typeOfCell",AR:"cellActiveArea",IT:"powerIn"}[e]||e}n.prototype.getData=function(){return{x:this.x,y:this.y}},n.prototype.toJcamp=function(){return function(e){let t={owner:"",origin:"",type:"IV curve",xUnit:"difference in electric potential [V]",yUnit:"intensity [A]",info:e.meta};return g.fromJson({x:e.x,y:e.y},t)}(this)},t.Spectrum=n,t.fromJcamp=function(e,t){const r=m.convert(e,{xy:!0,keepRecordsRegExp:/.*/,canonicDataLabels:!1,dynamicTyping:!0});let i=r.spectra[0].data[0],a=r.info,l={};for(let e of Object.keys(a).filter(e=>e.startsWith("$")))l[e.substr(1)]=a[e];return new n(i.x,i.y,t,{meta:l})},t.fromSIV=function(e){let t=e.split(/[\r\n]+/),n=(function(e){let t={};for(let n of e){let e=n.replace(/X ._([^=]*)=(.*)/,"$1").trim();e=a(e);let r=n.replace(/X ._([^=]*)=(.*)/,"$2").trim();r=r.replace(/^"(.*)"$/,"$1"),isNaN(r)||(r=Number(r)),t[e]=r}}(t.filter(e=>e.match(/X S_/))),function(e){let t={};for(let n of e){let e=n.replace(/X ._([^=]*)=(.*)/,"$1").trim();e=a(e);let r=n.replace(/X ._([^=]*)=(.*)/,"$2").trim();r=r.replace(/^"(.*)"$/,"$1"),isNaN(r)||(r=Number(r)),t[e]=r}}(t.filter(e=>e.match(/X V_/))),function(e){let t=e.replace("X d_t=","").trim().replace(/"/g,"");new Date(t)}(t.filter(e=>e.match(/X d_t/))[0]),e.split("WAVES\t"));for(let e of n){let t=e.split(/[\r\n]+/),n=t.filter(e=>e.match(/^[\t 0-9.eE-]+$/)).map(e=>Number(e));if(n.length<10)continue;t[0].trim();let i=r(t.filter(e=>e.match(/^X /)).map(e=>e.substring(2))[0],n.length);console.log("Unknown X axis:",i.kind,i.unit)}return[]}})),d=(h=y)&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h,x=y.Spectrum,A=y.fromJcamp,b=y.fromSIV;e.Spectrum=x,e.default=d,e.fromJcamp=A,e.fromSIV=b,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=iv-spectrum.min.js.map
